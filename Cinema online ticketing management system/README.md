# 电影院在线票务管理系统

一个基于C语言开发的命令行电影院票务管理系统，支持管理员和客户两种角色的操作。

## 功能特点

### 管理员功能
- 用户身份验证（默认账号：admin，密码：abc123）
- 添加新电影信息
- 删除已有电影
- 更新电影详细信息
- 查看所有电影列表
- 数据持久化存储（保存/加载电影信息到文件）

### 客户功能
- 浏览当前所有上映电影
- 在线订票（支持座位选择）
- 退票处理
- 查看订票记录

## 系统架构

### 主要组件
- `main.c`: 程序入口点，提供角色选择菜单
- `menu.h`: 定义电影信息结构体和函数声明
- `Service.c/h`: 实现管理员登录验证功能
- `menuAdmin.c`: 管理员操作界面及功能实现
- `menuClient.c`: 客户操作界面及功能实现

### 数据结构
```c
typedef struct Movie{
    int id;                  // 电影编号
    char name[50];           // 电影名称
    char showtime[20];       // 放映时间
    float price;             // 票价
    int hall;                // 影厅编号
    int tickets;             // 可用票数
} Movie;
```

## 使用方法

### 登录系统
1. 运行程序后选择"管理员菜单"
2. 输入用户名和密码
   - 默认用户名：`admin`
   - 默认密码：`abc123`
   - 最多允许3次登录尝试

### 管理员操作流程
1. 添加电影信息（编号、名称、时间、价格、影厅、票数）
2. 查看、更新或删除电影信息
3. 保存电影数据到文件（D:\movies.txt）
4. 可以从文件加载已有数据

### 客户操作流程
1. 浏览当前所有可预订电影
2. 选择目标电影进行订票
3. 选择所需座位（10x10座位布局）
4. 确认订票数量和总价
5. 可查看订票记录或进行退票操作

## 技术细节

### 文件存储
- 电影数据存储在 `D:\movies.txt`
- 格式：`编号|名称|时间|价格|影厅|票数`

### 座位管理
- 每个影厅有10行10列座位（100个座位）
- 0表示空闲座位，1表示已被预订

### 错误处理
- 输入验证（仅接受有效数字）
- 自动清理输入缓冲区
- 防止重复预订和超额预订
- 电影列表容量限制（最多100部电影）

## 编译与运行

使用任何支持C语言的编译器进行编译：
```bash
gcc main.c Service.c menuAdmin.c menuClient.c -o cinema_system
./cinema_system
```

或者使用项目提供的Makefile进行编译。

## 注意事项

1. 程序会在D盘根目录下创建或读取`movies.txt`文件
2. 管理员账户具有最高权限，请妥善保管密码
3. 系统数据在退出时不会自动保存，需要手动选择保存选项
4. 当前版本为单机版，不支持网络并发访问

## 开发环境

- 编程语言：C语言
- 开发平台：Windows
- 集成开发环境：Dev-C++或其他C语言IDE